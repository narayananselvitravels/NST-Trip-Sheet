<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Panel ‚Äì NST</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 30px;
      background: #f0f2f5;
      color: #333;
      max-width: 500px;
      margin: auto;
    }
    h2 { color: #4b2aad; }
    input, button {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin: 10px 0;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #4b2aad;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover { background-color: #3a1e95; }

    .admin-section {
      margin-top: 30px;
      display: none;
    }

    .ratePopup {
      display: none;
      background: white;
      border: 2px solid #4b2aad;
      border-radius: 10px;
      padding: 15px;
      max-height: 70vh;
      overflow-y: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
    }
    th {
      background: #4b2aad;
      color: white;
    }

    @media (max-width: 600px) {
      input, button { font-size: 14px; }
      th, td { font-size: 14px; }
    }
  </style>
</head>
<body>

<h2>üîê Admin Panel</h2>

<div id="loginForm">
  <input type="text" id="adminUser" placeholder="Username">
  <input type="password" id="adminPass" placeholder="Password">
  <button onclick="checkLogin()">Login</button>
</div>

<div class="admin-section" id="adminContent">
  <button onclick="resetAll()">üóëÔ∏è Reset All Trips & Share History</button>
  <button onclick="showRates()">‚úèÔ∏è Edit Vehicle Rates</button>

  <div class="ratePopup" id="ratePopup">
    <h3>‚úèÔ∏è Edit Vehicle Rates</h3>
    <table>
      <thead>
        <tr><th>Model</th><th>Package ‚Çπ</th><th>Extra Hr ‚Çπ</th><th>Extra KM ‚Çπ</th><th>Free KM</th><th>Vehicle No</th></tr>
      </thead>
      <tbody id="rateRows"></tbody>
    </table>
    <br>
    <button onclick="saveRates()">üíæ Save</button>
    <button onclick="hideRates()">Cancel</button>
  </div>
</div>

<script>
const RKEY = "nst-rates";

let defaultRates = {
  "Innova Crysta": { pkg: 7500, hr: 1000, km: 20, free: 80, no: "PY05N0505" },
  "Innova Hycross": { pkg: 8500, hr: 1200, km: 24, free: 60, no: "PY01DB1007" },
  "Force Urbania": { pkg: 9500, hr: 1500, km: 26, free: 70, no: "TN14AP2084" }
};

let rates = JSON.parse(localStorage.getItem(RKEY)) || defaultRates;

function checkLogin() {
  let u = document.getElementById("adminUser").value;
  let p = document.getElementById("adminPass").value;
  if (u === "admin" && p === "1234") {
    document.getElementById("loginForm").style.display = "none";
    document.getElementById("adminContent").style.display = "block";
  } else {
    alert("Invalid credentials");
  }
}

function resetAll() {
  if (confirm("This will clear all saved trips and share history. Continue?")) {
    localStorage.removeItem("nst-trips");
    localStorage.removeItem("nst-shared");
    alert("Data reset successful!");
  }
}

function showRates() {
  let rows = "";
  for (let m in rates) {
    let r = rates[m];
    rows += `
      <tr>
        <td>${m}</td>
        <td><input type="number" value="${r.pkg}" onchange="rates['${m}'].pkg=this.value"></td>
        <td><input type="number" value="${r.hr}" onchange="rates['${m}'].hr=this.value"></td>
        <td><input type="number" value="${r.km}" onchange="rates['${m}'].km=this.value"></td>
        <td><input type="number" value="${r.free}" onchange="rates['${m}'].free=this.value"></td>
        <td><input type="text" value="${r.no}" onchange="rates['${m}'].no=this.value"></td>
      </tr>`;
  }
  document.getElementById("rateRows").innerHTML = rows;
  document.getElementById("ratePopup").style.display = "block";
}

function hideRates() {
  document.getElementById("ratePopup").style.display = "none";
}

function saveRates() {
  localStorage.setItem(RKEY, JSON.stringify(rates));
  hideRates();
  alert("Rates updated successfully!");
}
</script>

</body>
</html>
